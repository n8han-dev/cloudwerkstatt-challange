# Ansible Role Documentation

## Role 1: local_accounts

### Description

This role ensures that user accounts and their associated groups are created and configured correctly.

#### Example Variable Usage

```yaml
users:
  - name: local_log # username to be created
    shell: /bin/sh # set default shell in case the system does not assign one automatically
    userid: 38000088 # if left unset then one will be generated by useradd.
    expiry_date: "2025-12-31" # Format "YYYY-MM-DD", specifies when user expires. set to -1 so user never expires
    home: /home/local_log
    groups: ["local_log"] # a list of groups that user belongs, comma separated. 
    # primary_group: "somegroup" - set this to explicitly assign a primary group to user
    ssh_key: "{{ encrypted_ssh_keys['local_log'] | default('') }}" # pulls an ssh key from local_accounts/vars/encrypted_ssh_key.yml via the username. if not present, the value is set to ""
```

---

## Role 2: ssh_config

### Description

This role ensures that specific SSH daemon configuration options are properly set in `/etc/ssh/sshd_config` and restarts the SSH service if any changes are made.

### Handlers: Restart SSHD
#### Description: Restarts sshd.service when triggered

### Tasks: Ensure SSH configuration options are set
**Purpose**: Updates SSH daemon config using `lineinfile`.

### Variables

#### Example Variable Usage

```yaml
ssh_options:
  - name: "PasswordAuthentication" # sshd compliant option
    value: "yes" # the line will be inserted in the format "name value"
```
